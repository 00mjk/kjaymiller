<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" type="text/css" href="/static/css/tailwind.css">
    <script src="https://kit.fontawesome.com/4ac674b58e.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Overpass+Mono:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/static/css/base.css">
    <link rel="stylesheet" type="text/css" href="/static/css/pygments.css">
    
  <link rel="stylesheet"  type="text/css" href="/static/css/blog.css">

    <title>
      
      How I Made My Twitch Player Appear on My Site Only When I&#39;m Live - Jay Miller
    </title>
  </head>
  <body class="flex flex-col h-full"> 
    <header
  class="
    bg-gradient-to-br
    from-purple-600
    to-indigo-800
    w-full
    flex
    xl:py-10
    py-3
    px-3
  "
>
  <div class="lg:mx-auto container">
    <div class="flex items-end">
      <h1 id="" class="title mx-3 text-2xl font-extrablack text-gray-200">
        <a class="hover:no-decorate" href="/">Jay Miller</a>
      </h1>
    </div>
    <div class="md:flex hidden" id="site-menu">
      
      <div class="p-3">
        <a
          class="
            rounded
            p-1
            hover:bg-gray-200
            hover:text-gray-600
            text-gray-200
          "
          href="/about.html"
        >
          About
        </a>
      </div>
      
      <div class="p-3">
        <a
          class="
            rounded
            p-1
            hover:bg-gray-200
            hover:text-gray-600
            text-gray-200
          "
          href="/blog-0.html"
        >
          Blog
        </a>
      </div>
      
      <div class="p-3">
        <a
          class="
            rounded
            p-1
            hover:bg-gray-200
            hover:text-gray-600
            text-gray-200
          "
          href="https://www.youtube.com/channel/UCjoJU65IbXkKXsNqydro05Q"
        >
          YouTube
        </a>
      </div>
      
      <div class="p-3">
        <a
          class="
            rounded
            p-1
            hover:bg-gray-200
            hover:text-gray-600
            text-gray-200
          "
          href="/conference-talks.html"
        >
          Talks
        </a>
      </div>
      
      <div class="p-3">
        <a
          class="
            rounded
            p-1
            hover:bg-gray-200
            hover:text-gray-600
            text-gray-200
          "
          href="/podcasts.html"
        >
          Podcasts
        </a>
      </div>
      
      <div class="p-3">
        <a
          class="
            rounded
            p-1
            hover:bg-gray-200
            hover:text-gray-600
            text-gray-200
          "
          href="/projects.html"
        >
          Projects
        </a>
      </div>
      
      <div class="p-3">
        <a
          class="
            rounded
            p-1
            hover:bg-gray-200
            hover:text-gray-600
            text-gray-200
          "
          href="/subscribe"
        >
          Newsletter
        </a>
      </div>
      
      <div class="p-3">
        <a
          class="
            rounded
            p-1
            hover:bg-gray-200
            hover:text-gray-600
            text-gray-200
          "
          href="/contact"
        >
          Contact
        </a>
      </div>
      
    </div>
    <div class="hidden">
      <form role="search" action="https://search.kjaymiller.com/">
        <div class="md:flex hidden">
          <input
            type="text"
            style="
              padding-left: 3em;
              background: url('/static/files/search.svg') 7px 0px white
                no-repeat;
            "
            class="inline border border-blue-800 rounded-full"
            name="q"
            id="search-bar"
            placeholder="Search"
          />
        </div>
      </form>
    </div>
  </div>
</header>
    <div class="m-4 xl:mx-auto container flex-grow">
         
<div class="container mx-auto m-4">
    <article>
            <div class="m-3">
                <h1 class="title text-4xl font-bold">How I Made My Twitch Player Appear on My Site Only When I&#39;m Live</h1>
              <small class="column is-narrow">
              Aug 12, 2020 11:27 AM
              </small>

        </div>
              <section class="bg-gray-400 flex">
                  <div class="px-3">
                  
                  <p class=""><strong>Category: </strong><small
                     class="tag">
                    <a href="/Code-0">Code</a>
                  </small>
                  </p>
                  
                  
                    <p class="">
                    <strong>Tags: </strong>
                    
                    <small class="mx-2 p-1 rounded border border-gray-400 bg-gray-200">
   <a href="twitch-0"
    class="">twitch
   </a> 
</small >
                    
                    <small class="mx-2 p-1 rounded border border-gray-400 bg-gray-200">
   <a href="javascript-0"
    class="">javascript
   </a> 
</small >
                    
                    <small class="mx-2 p-1 rounded border border-gray-400 bg-gray-200">
   <a href="kiss-0"
    class="">kiss
   </a> 
</small >
                    
                    </p>
                    
                </div>
              </section>
        </section>
        <hr />

        

        
        
        
	<img src="https://kjaymiller.s3-us-west-2.amazonaws.com/images/purple-background-twitch-embed.png">
    <section class="section my-4 py-4">
          <div class="content">
            <p>I wanted to write this to show that the easiest answer can often elude us. </p>

<p>If I asked you to add a twitch frame to a website and make it only appear when you were live, how would you do it?</p>

<h2>Embedding the Twitch Frame</h2>

<p>Following the <a href="https://dev.twitch.tv/docs/embed/everything">documentation</a> from Twitch, I copied the example code, adjusted the width and the height<sup class="footnote-ref" id="fnref-1"><a href="#fn-1">1</a></sup>, and changed the <code>channel-id</code> to my Twitch username.</p>

<h2>Checking the Live Status</h2>

<p>After spending an hour on stream trying to build a twitch app, I opted for the more low-tech solution. </p>

<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="p">(</span><span class="nx">player</span><span class="p">.</span><span class="nx">getPlayerState</span><span class="p">().</span><span class="nx">currentTime</span> <span class="o">!=</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#twitch-block&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;initial&#39;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">else</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#twitch-block&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;None&quot;</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>

<p>There were a few reasons:</p>

<ul>
<li>The javascript was easy.</li>
<li>The authentication stuff is hard to stream (in a secure way)</li>
<li>RateLimits and things</li>
<li>THE JAVASCRIPT WAS EASY</li>
</ul>

<p>The hardest part about building this listener was keeping it simple. You could add event listeners and things and you could use webhooks and all that stuff. Another option is to look at the <code>currentTime</code> value. When you are not streaming, <code>player.getPlayerState().currentTime == 0</code><sup class="footnote-ref" id="fnref-2"><a href="#fn-2">2</a></sup>. This means that I can set  <code>display="None"</code> on the element that holds the twitch player. Allowing my website to act like the embed was never there<sup class="footnote-ref" id="fnref-3"><a href="#fn-3">3</a></sup>. </p>

<p>Don't forget to add an amazing purple background so it looks fantastic!</p>

<p><img src="https://kjaymiller.s3-us-west-2.amazonaws.com/images/purple-background-twitch-embed.png" alt="embed with a beautiful background" /></p>

<div class="footnotes">
<hr />
<ol>
<li id="fn-1">
<p>Which I still a little confused on how that present in a responsive way&#160;<a href="#fnref-1" class="footnoteBackLink" title="Jump back to footnote 1 in the text.">&#8617;</a></p>
</li>

<li id="fn-2">
<p>I don't know if this is the case if you are hosting someone sooooo... Your mileage may vary.&#160;<a href="#fnref-2" class="footnoteBackLink" title="Jump back to footnote 2 in the text.">&#8617;</a></p>
</li>

<li id="fn-3">
<p>There could be some performance issues with this, but ultimately if there is the player would not load which means that the block wouldn't take up any space.&#160;<a href="#fnref-3" class="footnoteBackLink" title="Jump back to footnote 3 in the text.">&#8617;</a></p>
</li>
</ol>
</div>
 
          </div>
        </section>
      </article>
    <section class="my-4 border-t-2 border-gray-400">
      <div class="content p-2">
      <a href="/blog-0.html" class="subtitle is-5 text-link">Back to
        Blogs...</a>
    </section>
</div>

         
    </div>
    <footer class="object-bottom pin-b bg-gray-100 px-4 my-4">
  <div class="container  lg:flex md:mx-auto justify-around">
    <p> kjaymiller.com</p>
    <p>Website made with <a
                            href="https://github.com/kjaymiller/render_engine">Render Engine</a> and <a href="https://tailwindcss.com">TailwindCSS</a>
    <div>
      <p>
         <a href="/blog.rss.xml"><span class="icon"><i class="fas fa-rss"></i></a>
      </p>
    </div>
  </div>
  <div class="m-auto w-3/4 grid grid-cols-4 p-3">
    <figure class="social youtube">
        <a href="https://www.youtube.com/channel/UCjoJU65IbXkKXsNqydro05Q/">
            <img class="rounded-full" src="https://ik.imagekit.io/cxazzw3yew/YouTube_icon_square_logo.jpg?tr=w-50" alt="YouTube">
        </a>
    </figure>
    <figure class="social twitter">
        <a href="https://twitter.com/kjaymiller">
            <img class="rounded-full" src="https://ik.imagekit.io/cxazzw3yew/Twitter_icon_square_logo.jpg?tr=w-50 alt="Twitter">
        </a>
    </figure>
    <figure class="social linkedin">
        <a href="https://linkedin.com/in/kjaymiller">
            <img class="rounded-full" src="https://ik.imagekit.io/cxazzw3yew/LinkedIn_icon_square_logo.jpg?tr=w-50" alt="LinkedIn">
        </a>
    </figure>
</div>
</footer>
  </body>

</html>