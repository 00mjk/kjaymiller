<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/static/css/tailwind.css" />
    <script src="https://kit.fontawesome.com/94d9a219ee.js" crossorigin="anonymous"></script>
    
  <link rel="stylesheet" href="/static/css/pygments.css" />
  <link rel="stylesheet" href="/static/css/base.css" />

    <title>
      
      How I Made My Twitch Player Appear on My Site Only When I&#39;m Live - Jay Miller
    </title>
  </head>
  <body> 
    <div class="
  bg-gradient-to-br    
from-purple-600
to-indigo-800
  flex
  items-center
  p-5
  ">
    <h1 class="title mx-3 text-2xl font-bold text-gray-200">
      <a class="hover:no-decorate" href="/">Jay Miller</a>
    </h1>
    
      <a class="
            p-3
            rounded-lg
            hover:bg-gray-100
            hover:text-indigo-800
            hover:font-semibold
            text-gray-200
          " href="/about.html">
        About
      </a>

      
      <a class="
            p-3
            rounded-lg
            hover:bg-gray-100
            hover:text-indigo-800
            hover:font-semibold
            text-gray-200
          " href="/blog-0.html">
        Blog
      </a>

      
      <a class="
            p-3
            rounded-lg
            hover:bg-gray-100
            hover:text-indigo-800
            hover:font-semibold
            text-gray-200
          " href="https://www.youtube.com/channel/UCjoJU65IbXkKXsNqydro05Q">
        YouTube
      </a>

      
      <a class="
            p-3
            rounded-lg
            hover:bg-gray-100
            hover:text-indigo-800
            hover:font-semibold
            text-gray-200
          " href="/conference-talks.html">
        Talks
      </a>

      
      <a class="
            p-3
            rounded-lg
            hover:bg-gray-100
            hover:text-indigo-800
            hover:font-semibold
            text-gray-200
          " href="/podcasts.html">
        Podcasts
      </a>

      
      <a class="
            p-3
            rounded-lg
            hover:bg-gray-100
            hover:text-indigo-800
            hover:font-semibold
            text-gray-200
          " href="/projects.html">
        Projects
      </a>

      
      <a class="
            p-3
            rounded-lg
            hover:bg-gray-100
            hover:text-indigo-800
            hover:font-semibold
            text-gray-200
          " href="/subscribe">
        Newsletter
      </a>

      
      <a class="
            p-3
            rounded-lg
            hover:bg-gray-100
            hover:text-indigo-800
            hover:font-semibold
            text-gray-200
          " href="/contact">
        Contact
      </a>

      
    <div class="hidden">
      <form role="search" action="https://search.kjaymiller.com/">
        <div class="md:flex hidden">
          <input type="text" style="
              padding-left: 3em;
              background: url('/static/files/search.svg') 7px 0px white
                no-repeat;
            " class="inline border border-blue-800 rounded-full" name="q" id="search-bar" placeholder="Search" />
        </div>
      </form>
    </div>
  </div>
</div>
    <div class="mx-auto container flex-grow">
         
<div class="container mx-auto m-4">
    <article class="my-4 h-screen">
	<div class="feature-image">
	    <img src="https://kjaymiller.s3-us-west-2.amazonaws.com/images/purple-background-twitch-embed.png" class="rounded-lg shadow">
	</div>
            <div class="m-3">
                <h1 class="title text-4xl font-bold">How I Made My Twitch Player Appear on My Site Only When I&#39;m Live</h1>
              <small class="column is-narrow">
              Aug 12, 2020 11:27 AM
              </small>

        </div>
              <section class="bg-gray-400 flex">
                  <div class="px-3">
                  
                    <p class="">
                    <strong>Tags: </strong>
                    
                    <small class="mx-2 p-1 rounded border border-gray-400 bg-gray-200">
   <a href="twitch-0"
    class="">twitch
   </a> 
</small >
                    
                    <small class="mx-2 p-1 rounded border border-gray-400 bg-gray-200">
   <a href="javascript-0"
    class="">javascript
   </a> 
</small >
                    
                    <small class="mx-2 p-1 rounded border border-gray-400 bg-gray-200">
   <a href="kiss-0"
    class="">kiss
   </a> 
</small >
                    
                    </p>
                    
                </div>
              </section>
        </section>
        <hr />

        

        
        
        

    <section class="section my-4 py-4">
          <div class="content">
            <p>I wanted to write this to show that the easiest answer can often elude us. </p>

<p>If I asked you to add a twitch frame to a website and make it only appear when you were live, how would you do it?</p>

<h2>Embedding the Twitch Frame</h2>

<p>Following the <a href="https://dev.twitch.tv/docs/embed/everything">documentation</a> from Twitch, I copied the example code, adjusted the width and the height<sup class="footnote-ref" id="fnref-1"><a href="#fn-1">1</a></sup>, and changed the <code>channel-id</code> to my Twitch username.</p>

<h2>Checking the Live Status</h2>

<p>After spending an hour on stream trying to build a twitch app, I opted for the more low-tech solution. </p>

<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="p">(</span><span class="nx">player</span><span class="p">.</span><span class="nx">getPlayerState</span><span class="p">().</span><span class="nx">currentTime</span> <span class="o">!=</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#twitch-block&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;initial&#39;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">else</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#twitch-block&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;None&quot;</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>

<p>There were a few reasons:</p>

<ul>
<li>The javascript was easy.</li>
<li>The authentication stuff is hard to stream (in a secure way)</li>
<li>RateLimits and things</li>
<li>THE JAVASCRIPT WAS EASY</li>
</ul>

<p>The hardest part about building this listener was keeping it simple. You could add event listeners and things and you could use webhooks and all that stuff. Another option is to look at the <code>currentTime</code> value. When you are not streaming, <code>player.getPlayerState().currentTime == 0</code><sup class="footnote-ref" id="fnref-2"><a href="#fn-2">2</a></sup>. This means that I can set  <code>display="None"</code> on the element that holds the twitch player. Allowing my website to act like the embed was never there<sup class="footnote-ref" id="fnref-3"><a href="#fn-3">3</a></sup>. </p>

<p>Don't forget to add an amazing purple background so it looks fantastic!</p>

<p><img src="https://kjaymiller.s3-us-west-2.amazonaws.com/images/purple-background-twitch-embed.png" alt="embed with a beautiful background" /></p>

<div class="footnotes">
<hr />
<ol>
<li id="fn-1">
<p>Which I still a little confused on how that present in a responsive way&#160;<a href="#fnref-1" class="footnoteBackLink" title="Jump back to footnote 1 in the text.">&#8617;</a></p>
</li>

<li id="fn-2">
<p>I don't know if this is the case if you are hosting someone sooooo... Your mileage may vary.&#160;<a href="#fnref-2" class="footnoteBackLink" title="Jump back to footnote 2 in the text.">&#8617;</a></p>
</li>

<li id="fn-3">
<p>There could be some performance issues with this, but ultimately if there is the player would not load which means that the block wouldn't take up any space.&#160;<a href="#fnref-3" class="footnoteBackLink" title="Jump back to footnote 3 in the text.">&#8617;</a></p>
</li>
</ol>
</div>
 
          </div>
        </section>
      </article>
    <section class="my-4 border-t-2 border-gray-400">
      <div class="content p-2">
      <a href="/blog-0.html" class="subtitle is-5 text-link">Back to
        Blogs...</a>
    </section>
</div>

         
    </div>
    <footer class="container mx-auto shadow rounded-md bottom-0 bg-slate-50 px-4 my-4 h-24">
  <div class="lg:flex md:mx-auto h-full justify-around items-center">
    <p> kjaymiller.com</p>
    <p>Website made with <a
                            class="hover:underline" href="https://github.com/kjaymiller/render_engine">Render Engine</a> and <a href="https://tailwindcss.com">TailwindCSS</a>
    <div>
      <a class="hover:underline" href="/blog.rss.xml"><span class="icon"><i class="fas fa-rss"></i></a>
              <a href="https://www.youtube.com/channel/UCjoJU65IbXkKXsNqydro05Q/">
            <i class="text-red-700 text-2xl m-3 fa-brands fa-youtube"></i>
        </a>
        <a href="https://twitter.com/kjaymiller">
            <i class="text-blue-500 m-3 text-2xl fa-brands fa-twitter-square"></i>
        </a>
        <a href="https://linkedin.com/in/kjaymiller">
            <i class="text-blue-900 m-3 text-2xl fa-brands fa-linkedin"></i>
        </a>
    
    </div>
  </div>
</footer>
  </body>

</html>